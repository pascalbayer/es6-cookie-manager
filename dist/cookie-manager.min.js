function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),CookieManager=function(){function e(t,i,n){if(_classCallCheck(this,e),"object"!=typeof window.document)throw new Error("CookieManager requires a `window` with a `document` object");this._document=window.document,this._cacheKeyPrefix="cookie_manager.",this._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),this._defaults={path:"/",secure:!1}}return _createClass(e,[{key:"get",value:function(e){return this._cachedDocumentCookie!==this._document.cookie&&this._renewCache(),this._cache[this._cacheKeyPrefix+e]}},{key:"set",value:function(e,t,i){return i=this._getExtendedOptions(i),i.expires=this._getExpiresDate(void 0===t?-1:i.expires),this._document.cookie=this._generateCookieString(e,t,i),this}},{key:"expire",value:function(e,t){return this.set(e,void 0,t)}},{key:"setDefaults",value:function(e){this._extend(this._defaults,e)}},{key:"cookiesEnabled",value:function(){var e="cookie-manager.js",t="1"===this.set(e,1).get(e);return this.expire(e),t}},{key:"_extend",value:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t)for(var i in t)e[i]=t[i]}),e}},{key:"_getExtendedOptions",value:function(e){return{path:e&&e.path||this._defaults.path,domain:e&&e.domain||this._defaults.domain,expires:e&&e.expires||this._defaults.expires,secure:e&&void 0!==e.secure?e.secure:this._defaults.secure}}},{key:"_isValidDate",value:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())}},{key:"_getExpiresDate",value:function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?this._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!this._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e}},{key:"_generateCookieString",value:function(e,t,i){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),i=i||{};var n=e+"="+t;return n+=i.path?";path="+i.path:"",n+=i.domain?";domain="+i.domain:"",n+=i.expires?";expires="+i.expires.toUTCString():"",n+=i.secure?";secure":""}},{key:"_getCacheFromString",value:function(e){for(var t={},i=e?e.split("; "):[],n=0;n<i.length;n++){var r=this._getKeyValuePairFromCookieString(i[n]);void 0===t[this._cacheKeyPrefix+r.key]&&(t[this._cacheKeyPrefix+r.key]=r.value)}return t}},{key:"_getKeyValuePairFromCookieString",value:function(e){var t=e.indexOf("=");return t=0>t?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}}},{key:"_renewCache",value:function(){this._cache=this._getCacheFromString(this._document.cookie),this._cachedDocumentCookie=this._document.cookie}}]),e}();